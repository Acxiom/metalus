[{"id":"f4835500-4c4a-11ea-9c79-f31d60741e3b","name":"DownloadToBronzeHdfs","steps":[{"id":"DownloadToHdfs","displayName":"Step Group","description":"Allows pipelines to be executed as a single step within a parent pipeline.","type":"step-group","params":[{"type":"text","name":"pipelineId","required":false,"value":"46f5e310-4c47-11ea-a0a7-a749c3ebbd62","description":""},{"type":"text","name":"pipeline","required":false,"value":"&46f5e310-4c47-11ea-a0a7-a749c3ebbd62","description":""},{"type":"object","name":"pipelineMappings","required":false,"value":{"fileId":"!fileId","output_buffer_size":"!outputBufferSize || 65536","input_buffer_size":"!inputBufferSize || 65536","sftp_port":"!sftpPort || 22","sftp_input_path":"!sftpInputPath","sftp_username":"!sftpUsername","landing_path":"!landingPath","sftp_password":"!sftpPassword","read_buffer_size":"!readBufferSize || 32768","sftp_host":"!sftpHost"},"description":""}],"nextStepId":"LandingFileToDataFrame","stepId":"f09b3b9c-82ac-56de-8dc8-f57c063dd4aa"},{"id":"LandingFileToDataFrame","displayName":"Load DataFrame from HDFS path","description":"This step will read a dataFrame from the given HDFS path","type":"Pipeline","params":[{"type":"text","name":"path","required":false,"value":"!{landingPath}/!{fileId}","description":""},{"type":"object","name":"options","required":false,"value":"!inputReaderOptions","className":"com.acxiom.pipeline.steps.DataFrameReaderOptions","description":""}],"engineMeta":{"spark":"HDFSSteps.readFromPath","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"StandardizeColumnNames","stepId":"87db259d-606e-46eb-b723-82923349640f"},{"id":"StandardizeColumnNames","displayName":"Standardize Column Names on a DataFrame","description":"This step will standardize columns names on existing dataframe","type":"Pipeline","params":[{"type":"text","name":"dataFrame","required":false,"value":"@LandingFileToDataFrame","description":""}],"engineMeta":{"spark":"TransformationSteps.standardizeColumnNames","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"AddRecordId","stepId":"a981080d-714c-4d36-8b09-d95842ec5655"},{"id":"AddRecordId","displayName":"Adds a Unique Identifier to a DataFrame","description":"This step will add a new unique identifier to an existing data frame","type":"Pipeline","params":[{"type":"text","name":"idColumnName","required":false,"value":"metalus_record_id","description":""},{"type":"text","name":"dataFrame","required":false,"value":"@StandardizeColumnNames","description":""}],"engineMeta":{"spark":"DataSteps.addUniqueIdToDataFrame","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"AddFileId","stepId":"9f7d84b0-ebab-57da-8b39-be4c47028242"},{"id":"AddFileId","displayName":"Add a Column with a Static Value to All Rows in a DataFrame","description":"This step will add a column with a static value to all rows in the provided data frame","type":"Pipeline","params":[{"type":"text","name":"dataFrame","required":false,"value":"@AddRecordId","description":""},{"type":"text","name":"columnName","required":false,"value":"metalus_file_id","description":""},{"type":"text","name":"columnValue","required":false,"value":"!fileId","description":""}],"engineMeta":{"spark":"DataSteps.addStaticColumnToDataFrame","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"WriteToParquetHdfs","stepId":"37e10488-02c1-5c85-b47a-efecf681fdd4"},{"id":"WriteToParquetHdfs","displayName":"Write DataFrame to HDFS","description":"This step will write a dataFrame in a given format to HDFS","type":"Pipeline","params":[{"type":"text","name":"dataFrame","required":false,"value":"@AddFileId","description":""},{"type":"text","name":"path","required":false,"value":"!{bronzeZonePath}/!{fileId}","description":""},{"type":"object","name":"options","required":false,"value":{"format":"parquet","saveMode":"Overwrite","options":{},"schema":{"attributes":[]}},"className":"com.acxiom.pipeline.steps.DataFrameWriterOptions","description":""}],"engineMeta":{"spark":"HDFSSteps.writeToPath","pkg":"com.acxiom.pipeline.steps"},"stepId":"0a296858-e8b7-43dd-9f55-88d00a7cd8fa"}],"category":"pipeline","tags":["metalus-common_2.11-spark_2.4-1.8.0-SNAPSHOT.jar"]},{"id":"46f5e310-4c47-11ea-a0a7-a749c3ebbd62","name":"SG_SftpToHdfs","steps":[{"id":"CreateSFTPFileManager","displayName":"Create SFTP FileManager","description":"Simple function to generate the SFTPFileManager for the remote SFTP file system","type":"Pipeline","params":[{"type":"text","name":"hostName","required":false,"value":"!sftp_host","description":""},{"type":"text","name":"username","required":false,"value":"!sftp_username","description":""},{"type":"text","name":"password","required":false,"value":"!sftp_password","description":""},{"type":"integer","name":"port","required":false,"value":"!sftp_port || 22","description":""},{"type":"text","name":"strictHostChecking","required":false,"value":false,"description":""}],"engineMeta":{"spark":"SFTPSteps.createFileManager","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"CreateHDFSFileManager","stepId":"9d467cb0-8b3d-40a0-9ccd-9cf8c5b6cb38"},{"id":"CreateHDFSFileManager","displayName":"Create HDFS FileManager","description":"Simple function to generate the HDFSFileManager for the local HDFS file system","type":"Pipeline","params":[],"engineMeta":{"spark":"HDFSSteps.createFileManager","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"DownloadFile","stepId":"e4dad367-a506-5afd-86c0-82c2cf5cd15c"},{"id":"DownloadFile","displayName":"Buffered file copy","description":"Copy the contents of the source path to the destination path using full buffer sizes. This function will call connect on both FileManagers.","type":"Pipeline","params":[{"type":"text","name":"srcFS","required":false,"value":"@CreateSFTPFileManager","description":""},{"type":"text","name":"srcPath","required":false,"value":"!sftp_input_path","description":""},{"type":"text","name":"destFS","required":false,"value":"@CreateHDFSFileManager","description":""},{"type":"text","name":"destPath","required":false,"value":"!{landing_path}/!{fileId}","description":""},{"type":"text","name":"inputBufferSize","required":false,"value":"!input_buffer_size || 65536","description":""},{"type":"text","name":"outputBufferSize","required":false,"value":"!output_buffer_size || 65536","description":""},{"type":"text","name":"copyBufferSize","required":false,"value":"!read_buffer_size || 32768","description":""}],"engineMeta":{"spark":"FileManagerSteps.copy","pkg":"com.acxiom.pipeline.steps"},"nextStepId":"DisconnectSFTPFileManager","stepId":"f5a24db0-e91b-5c88-8e67-ab5cff09c883"},{"id":"DisconnectSFTPFileManager","displayName":"Disconnect a FileManager","description":"Disconnects a FileManager from the underlying file system","type":"Pipeline","params":[{"type":"text","name":"fileManager","required":false,"value":"@CreateSFTPFileManager","description":""}],"engineMeta":{"spark":"FileManagerSteps.disconnectFileManager","pkg":"com.acxiom.pipeline.steps"},"stepId":"3d1e8519-690c-55f0-bd05-1e7b97fb6633"}],"category":"step-group","tags":["metalus-common_2.11-spark_2.4-1.8.0-SNAPSHOT.jar"]}]
